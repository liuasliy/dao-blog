{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.6cdaa262a1e7aeb6f100.hot-update.js","sources":["webpack:///./components/Paging.js","webpack:///./pages/index.js"],"sourcesContent":["import Link from 'next/link';\r\n\r\n\r\nconst Paging = () => (\r\n    <div className=\"paging\">\r\n        <Link href=\"/\">\r\n            <a >Previous</a>\r\n        </Link>\r\n        <Link href=\"/\">\r\n            <a >1</a>\r\n        </Link>\r\n        <Link href=\"/\">\r\n            <a >2</a>\r\n        </Link>\r\n        <Link href=\"/about\">\r\n            <a>Next</a>\r\n        </Link>\r\n    </div>\r\n)\r\n\r\nexport default Paging;\r\n","import React from 'react';\r\n\r\nimport Link from 'next/link';\r\nimport Layout from '../components/Layout';\r\nimport LoadMore from '../components/LoadMore';\r\nimport Paging from '../components/Paging'\r\n\r\nimport Fetch from '../utils/axios';\r\nimport { api } from '../utils/api'\r\nimport fetch from 'isomorphic-unfetch';\r\n\r\n\r\nclass Index extends React.Component {\r\n    // static async getInitialProps() {\r\n    //     const req = await fetch(api.blog_list + `?page_size=3&page=${1}`);\r\n    //     const res = await req.json();\r\n    //     if (res.code === '0') {\r\n    //         return {\r\n    //             posts: res.data.list,\r\n    //             totalPage: res.data.totalPage\r\n    //         }\r\n    //     }\r\n    // }\r\n    state = {\r\n        _page: 1,\r\n        isLoadingMore: false,\r\n        totalPage: 0,\r\n        isComplete: false\r\n    }\r\n    loadMoreData() {\r\n        // 记录状态\r\n        this.setState({\r\n            isLoadingMore: true\r\n        })\r\n        this.resultHandle()\r\n    }\r\n    resultHandle() {\r\n        const page = this.state._page\r\n        this.setState({\r\n            _page: page + 1\r\n        }, () => {\r\n            if (this.state._page > this.state.totalPage) {\r\n                this.setState({\r\n                    isLoadingMore: false,\r\n                    isComplete: true\r\n                })\r\n                return false;\r\n            }\r\n            else {\r\n                //加载更多数据\r\n                Fetch({\r\n                    url: api.blog_list + `?page_size=3&page=${this.state._page}`,\r\n                    type: 'get',\r\n                }).then(res => {\r\n                    const { code, data } = res.data;\r\n                    if (code === '0') {\r\n                        this.setState({\r\n                            listData: this.state.listData.concat(data.list),\r\n                            isLoadingMore: false\r\n                        })\r\n                    }\r\n\r\n                })\r\n                    .catch(error => {\r\n                        console.log('error: ' + error)\r\n                    })\r\n            }\r\n        })\r\n\r\n\r\n    }\r\n    render() {\r\n        return (\r\n            <Layout>\r\n                <div className=\"d-home\">\r\n                    <div className=\"d-wrap\">\r\n                        {\r\n                            this.props.posts.map((item, indexs) => {\r\n                                return <article key={indexs}>\r\n                                    <h3 className=\"d-title\">\r\n                                        <Link as={`/article/detail/${item.id}`} href={`/detail?id=${item.id}`}>\r\n                                            <a><span>{item.title}</span></a>\r\n                                        </Link>\r\n                                    </h3>\r\n                                    <div className=\"d-content\">\r\n                                        {item.brief}\r\n                                    </div>\r\n                                    <div className=\"d-intro\">\r\n                                        <span className=\"d-date\">{item.pubdate}</span>\r\n                                        <span className=\"d-tags\">\r\n                                            {\r\n                                                item.tags.map((items, index) => {\r\n                                                    return\r\n                                                    <Link as={`/article/tag/${items.id}`} href={`/tag?id=${items.id}`}>\r\n                                                        <a >{items}</a>\r\n                                                    </Link>\r\n                                                })\r\n                                            }\r\n                                        </span>\r\n                                        <span className=\"d-view-num\">阅读:{item.read_count}</span>\r\n                                    </div>\r\n                                </article>\r\n                            })\r\n                        }\r\n                        {\r\n                            this.state.isComplete ? <div className=\"load-more\">已经没有更多数据啦~</div> : <LoadMore isLoadingMore={this.state.isLoadingMore} loadMoreFn={this.loadMoreData.bind(this)} />\r\n                        }\r\n\r\n                    </div>\r\n                    <style jsx>\r\n                        {`\r\n                body {\r\n                    background-color: #f7f7f7;\r\n                }\r\n                \r\n                .d-home {\r\n                    max-width: 1170px;\r\n                    margin: .8rem auto 0;\r\n                    min-height: 100vh;\r\n                    background: #fff;\r\n                    padding-top: .50rem;\r\n                }\r\n                \r\n                .d-wrap {\r\n                    width: 780px;\r\n                    margin: 0 auto;\r\n                    padding-bottom: 1.2rem;\r\n                }\r\n                \r\n                article {\r\n                    margin-bottom: 1.2rem;\r\n                    position: relative;\r\n                }\r\n                \r\n                article::after {\r\n                    content: \"\";\r\n                    display: block;\r\n                    width: 50%;\r\n                    margin: 0 auto;\r\n                    height: 1px;\r\n                    background: #ddd;\r\n                    position: absolute;\r\n                    bottom: -.6rem;\r\n                    left: 0;\r\n                    right: 0;\r\n                }\r\n                \r\n                article:last-child::after {\r\n                    height: 0;\r\n                }\r\n                \r\n                .d-title {\r\n                    font-weight: normal;\r\n                    font-size: .32rem;\r\n                    margin: 0;\r\n                    padding: 0;\r\n                    margin-bottom: .2rem;\r\n                }\r\n                \r\n                .d-title a {\r\n                    color: #333;\r\n                    text-decoration: none;\r\n                    cursor: pointer;\r\n                }\r\n                \r\n                .d-title a span {\r\n                    padding-bottom: 3px;\r\n                    -webkit-transition: 0.15s;\r\n                    transition: 0.15s;\r\n                    box-shadow: inset 0 -2px 0 rgba(63, 81, 181, 0);\r\n                }\r\n                \r\n                .d-title a:hover span {\r\n                    box-shadow: inset 0 -2px 0 rgba(63, 81, 181, 0.6);\r\n                }\r\n                \r\n                .d-content {\r\n                    font-size: .16rem;\r\n                    line-height: .26rem;\r\n                    margin-bottom: .15rem;\r\n                }\r\n                \r\n                .d-intro {\r\n                    display: flex;\r\n                    align-items: center;\r\n                    font-size: .14rem;\r\n                    color: #666;\r\n                }\r\n                \r\n                .d-date {}\r\n                \r\n                .d-tags {\r\n                    flex: 1;\r\n                    margin-left: .15rem;\r\n                    position: relative;\r\n                    padding-left: .25rem;\r\n                }\r\n                \r\n                .d-tags a {\r\n                    display: inline-block;\r\n                    cursor: pointer;\r\n                }\r\n                \r\n                .d-tags a:hover {\r\n                    color: #000\r\n                }\r\n                \r\n                .d-tags a+a:before {\r\n                    content: \"/\";\r\n                    margin: 0 .05rem;\r\n                }\r\n                \r\n                .d-tags::before {\r\n                    content: \"\";\r\n                    display: block;\r\n                    width: .20rem;\r\n                    height: .20rem;\r\n                    background: url('../../images/icon-tag.png') no-repeat;\r\n                    background-size: .20rem .20rem;\r\n                    position: absolute;\r\n                    left: 0;\r\n                    top: .01rem;\r\n                }\r\n                \r\n                .d-view-num {\r\n                    position: relative;\r\n                    padding-left: .25rem;\r\n                }\r\n                \r\n                .d-view-num::before {\r\n                    content: \"\";\r\n                    display: block;\r\n                    width: .20rem;\r\n                    height: .20rem;\r\n                    background: url('../../images/icon-view.png') no-repeat;\r\n                    background-size: .20rem .20rem;\r\n                    position: absolute;\r\n                    left: 0;\r\n                    top: 0;\r\n                }\r\n                \r\n                .load-more {\r\n                    text-align: center;\r\n                    font-size: .16rem;\r\n                    background: #eee;\r\n                    padding: .10rem 0;\r\n                }\r\n                `}\r\n                    </style>\r\n                </div>\r\n\r\n            </Layout>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nIndex.getInitialProps = async function () {\r\n    const res = await fetch(api.blog_list+`?page_size=10&page=${1}`);\r\n    const data = await res.json();\r\n    if(data.code === '0'){\r\n        return {\r\n            posts: data.data.list,\r\n            totalPage: data.data.totalPage\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default Index;"],"mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAGA;AAAA;AAGA;AAAA;AAGA;AAAA;AAXA;AACA;AAgBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpBA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;AAWA;AACA;AACA;AACA;AACA;AAJA;AACA;;;;;;AAKA;AACA;AACA;AACA;AADA;AAGA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAFA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AAFA;AAGA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AAEA;AACA;AACA;AACA;AAGA;;;AACA;AACA;AAEA;AAAA;AACA;AAAA;AAGA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AAAA;AAGA;AAAA;AACA;AAAA;AACA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AAGA;AAAA;AAGA;AAGA;AAAA;AAAA;AAAA;AAAA;AA/BA;AAAA;AAmLA;;;;AAjPA;AACA;AAsPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AACA;AADA;AAEA;AACA;AAHA;AAAA;AAAA;AAAA;AACA;AADA;AAKA;AACA;AAFA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;;;;A","sourceRoot":""}